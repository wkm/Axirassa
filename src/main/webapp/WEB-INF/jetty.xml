<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">

<!--  THIS APPEARS TO BE IGNORED -->
<!-- yeah, no shit sherlock, it's ignored if you launch with jetty:run -->
<Configure id="Server" class="org.mortbay.jetty.Server">
	<Set name="ThreadPool">
		<New class="org.mortbay.thread.QueuedThreadPool">
			<Set name="minThreads">50</Set>
			<Set name="maxThreads">2000</Set>
			<Set name="lowThreads">200</Set>
			<Set name="SpawnOrShrinkAt">2</Set>
		</New>
	</Set>

    <Set name="sessionHandler">
        <New class="org.mortbay.jetty.servlet.SessionHandler">
            <Arg>
                <New class="org.mortbay.jetty.servlet.HashSessionManager">
                    <Set name="actualMaxInactiveInterval">1209600</Set> <!-- two weeks 14 * 24 * 60 * 60 -->
                </New>
            </Arg>
        </New>
    </Set>
	
    <Set name="sendServerVersion">false</Set>
    <Set name="sendDateHeader">false</Set>
	
	 <Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.nio.SelectChannelConnector">
            <!-- the ip address or domain to bind -->
            <Set name="host"><SystemProperty name="jetty.host" default="localhost" /></Set>

            <!-- the port to use/bind, defaults to 8080 if property not set -->
            <Set name="port"><SystemProperty name="jetty.port" default="8080"/></Set>

            <!-- the time in milliseconds when a connection is considered idle -->
            <Set name="maxIdleTime">300000</Set>

            <!-- the number of acceptors (their job is to accept the connection and dispatch to thread pool) -->
            <Set name="Acceptors">30</Set>

            <!-- should the connection statistics be turned on? (Not advisable in production) -->
            <Set name="statsOn">false</Set>

            <!-- the confidential port -->
            <Set name="confidentialPort">8443</Set>

            <!-- indicates the minimum number of connections when the server is considered low on resources -->
		    <Set name="lowResourcesConnections">20000</Set>
	
            <!-- when low on resources, this indicates the maximum time (milliseconds) a connection must be idle to not be closed -->
		    <Set name="lowResourcesMaxIdleTime">5000</Set>
      	</New>
      </Arg>
    </Call>
</Configure>