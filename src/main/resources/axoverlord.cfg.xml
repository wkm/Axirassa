<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE axoverlord-configuration PUBLIC
 "-//AxOverlord/AxOverlord Configuration DTD 1.0//EN"
 "classpath://axirassa/overlord/AxOverlord-Configuration-1.0.dtd">
<configuration>

	<!-- ################################################################ -->
	<!-- EXECUTION TARGET CLASSES                                         -->
	<!-- ################################################################ -->
    <target name="AxSentinelAgent" class="axirassa.services.sentinel.SentinelService" autorestart="true">
    	<!-- JVM options -->
        <jvmoption name="Xmx" value="32M"/>
        <jvmoption name="Xms" value="32M"/>
        <jvmoption name="Xss" value="1024K"/>
		
		<!-- necessary libraries -->
		<library>/libsigar-x86-linux.so</library>
		<library>/libsigar-amd64-linux.so</library>
		<library>/libsigar-ia64-linux.so</library>
		<library>/sigar-x86-winnt.dll</library>
		<library>/sigar-amd64-winnt.dll</library>
		<library>/libsigar-universal-macosx.dylib</library>
		<library>/libsigar-universal64-macosx.dylib</library>
    </target>
    
    <target name="AxMessagingServer" 
            class="axirassa.util.EmbeddedMessagingServer" 
            autorestart="true">
		<jvmoption name="Xmx" value="512m"/>
		<jvmoption name="Xms" value="512m"/>   	
    </target>
    
    <target name="AxControllerService" 
    	    class="axirassa.services.runners.ControllerServiceRunner"
            autorestart="true">
		<jvmoption name="Xmx" value="64m"/>
		<jvmoption name="Xms" value="64m"/>
	</target>
	
	<target name="AxInjectorService" 
    	    class="axirassa.services.runners.InjectorServiceRunner"
            autorestart="true">
		<jvmoption name="Xmx" value="64m"/>
		<jvmoption name="Xms" value="64m"/>
	</target>

    <target name="AxPingerService"
            class="axirassa.services.runners.PingerServiceRunner"
            autorestart="true">
		<jvmoption name="Xmx" value="16m"/>
	</target>
	
	<target name="AxEmailNotificationService"
	        class="axirassa.services.runners.EmailServiceRunner"
	        autorestart="true">
		<jvmoption name="Xmx" value="16m"/>        
	</target>
	
	<target name="AxSmsNotificationService"
	        class="axirassa.services.runners.SmsNotificationServiceRunner"
	        autorestart="true">
		<jvmoption name="Xmx" value="16m"/>        
	</target>
	
	<target name="AxVoiceNotificationService"
	        class="axirassa.services.runners.VoiceNotificationServiceRunner"
	        autorestart="true">
		<jvmoption name="Xmx" value="16m"/>        
	</target>
	
	<target name="AxDatabaseCleanerService"
			class="axirassa.services.runners.DatabaseCleanerServiceRunner"
			autorestart="true">
		<jvmoption name="Xmx" value="16m" />
	</target>
	
	
	
	<!-- ################################################################ -->
	<!-- EXECUTION GROUPS                                                 -->
	<!-- ################################################################ --> 

    <group name="master">
    	<execute target="AxMessagingServer" />
    	
    	<!-- wait for one second to let the server finish starting -->
    	
    	<execute target="AxControllerService" initialdelay="1000"  />
    	<execute target="AxPingerService" instances="32" />
    	<execute target="AxInjectorService" />
    	
    	<execute target="AxEmailNotificationService" />
    	<execute target="AxVoiceNotificationService" />
    	<execute target="AxSmsNotificationService" />
    	
    	<execute target="AxDatabaseCleanerService" />
    </group>
    
    <!--
    <group name="worker">
    <execute>AxSentinelAgent</execute>
    <execute instances="6">AxPinger</execute>
    </group>
    
    <group name="support">
    <execute>AxSentinelAgent</execute>
    <execute instances="3">AxEmailService</execute>
    <execute instances="3">AxSMSService</execute>
    </group>
    -->
</configuration>
